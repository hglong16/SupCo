<odoo>
    <data>
        <record id="action_supreme_court_letters" model="ir.actions.act_window">
            <field name="name">Introduction Letter</field>
            <field name="res_model">supreme.court.letter</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="seq_supreme_court_letter" model="ir.sequence">
            <field name="name">Supreme Court Letter</field>
            <field name="code">supreme.court.letter</field>
            <field name="padding">5</field>
        </record>

        <record id="view_form_supreme_court_letter" model="ir.ui.view">
            <field name="name">supreme.court.letter.form</field>
            <field name="model">supreme.court.letter</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <t t-set="form_status" t-value="props.record.data.approval_status"></t>

                        <button string="Request First Approval" type="object" class="oe_highlight"
                                name="action_request_first_approval" confirm="Xác nhận gửi đơn xin duyệt lần 1"
                                attrs="{'invisible': ['&amp;',('approval_status','!=','draft'),('approval_status','!=','rejected')]}"/>

                        <button name="action_first_approval" string="First Approval" type="object" class="oe_highlight"
                                groups="supco.group_first_approval" confirm="Xác nhận phê duyệt lần 1"
                                attrs="{'invisible': [('approval_status', '!=', 'waiting_first_approval')]}"/>

                        <button name="action_reject" string="Reject" type="object"
                                class="btn btn-danger" groups="supco.group_first_approval, supco.group_second_approval"
                                confirm="Xác nhận không phê duyệt đơn này"
                                attrs="{'invisible': ['|', '|', ('approval_status','=','draft'), ('approval_status','=','approved'), ('approval_status','=','rejected')]}"/>

                        <button name="action_second_approval" string="Second Approval" type="object"
                                class="oe_highlight" groups="supco.group_second_approval"
                                confirm="Xác nhận phê duyệt lần 2"
                                attrs="{'invisible': [( 'approval_status','!=', 'waiting_second_approval' )]}"/>

                        <t t-out="status"></t>

                        <t t-if="status == 'waiting_second_approval' or status == 'approved'">
                        </t>
                    </header>
                    <sheet>
                        <group>
                            <field name="id" invisible="1"/>
                            <field name="display_number" invisible="1"/>
                            <field name="user_ids" widget="many2many_tags"/>
                            <field name="recipient_name"/>
                            <field name="title_position"/>
                            <field name="organization_unit"/>
                            <field name="address"/>
                            <field name="regarding"/>
                            <field name="validity_date"/>
                            <field name="approval_status" readonly="1"/>
                            <field name="custom_url" widget="url"
                                   attrs="{'invisible': [('approval_status', '!=', 'approved')]}"/>
                            <field name="qr_code" widget='image' class="oe_avatar"
                                   attrs="{'invisible': [('approval_status', '!=', 'approved')]}"/>
                            <field name="first_approval_by" options="{'no_open': True}" widget='many2one'/>
                            <field name="second_approval_by" options="{'no_open': True}" widget='many2one'/>
                            <field name="reject_by" options="{'no_open': True}" widget='many2one'/>
                            <field name="reject_reason"
                                   groups="supco.group_first_approval,supco.group_second_approval"/>
                            <field name="reject_reason_user"
                                   attrs="{'invisible': [('approval_status', '!=', 'rejected')]}"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_tree_supreme_court_letter" model="ir.ui.view">
            <field name="name">supreme.court.letter.tree</field>
            <field name="model">supreme.court.letter</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="display_number"/>
                    <field name="recipient_name"/>
                    <field name="title_position"/>
                    <field name="organization_unit"/>
                    <field name="address"/>
                    <field name="regarding"/>
                    <field name="validity_date"/>
                    <field name="custom_url" widget="url"/>
                    <field name="approval_status"/>
                </tree>
            </field>
        </record>

        <!--        LOG VIEW AND ACTION-->

        <record id="view_letter_rejection_log_form" model="ir.ui.view">
            <field name="name">letter.rejection.log.form</field>
            <field name="model">letter.rejection.log</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="letter_id"/>
                        <field name="reject_by"/>
                        <field name="rejection_reason"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="view_letter_rejection_log_tree" model="ir.ui.view">
            <field name="name">letter.rejection.log.tree</field>
            <field name="model">letter.rejection.log</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="letter_id"/>
                    <field name="reject_by"/>
                    <field name="rejection_reason"/>
                </tree>
            </field>
        </record>

        <record id="view_letter_rejection_log_action" model="ir.actions.act_window">
            <field name="name">Letter Rejection Log</field>
            <field name="res_model">letter.rejection.log</field>
            <field name="view_mode">tree,form</field>
        </record>
    </data>
</odoo>